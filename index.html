<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
<style>
  body {
    font-family: 'Helvetica Neue', 'Garamond';
  }
  #wrapper {
    position: absolute;
    width: 500px;
    left: 50%;
    margin-left: -250px;
  }
  ul {
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
  }
  .label {
    display: block;
    margin-bottom: 5px;    
  }
  input {
    border: 1px solid black;
    padding: 3px;
  }  
  .radiolbl {
    padding-right: 5px;
    padding-left: 5px;
  }
</style>
<div id="wrapper">
  <h1>Class Schedule</h1>
  <form action="/submit" method="POST" id="form">
    <span class="label">What period has ended?</span><input type="text" name="period" placeholder="Period" value="0">
    <span class="label">What time is it?</span><input type="text" name="start" placeholder="Start Time" value="7:57">
    <span class="label">When does school end?</span><input type="text" name="end" placeholder="End Time" value="3:13">
    <br><span class="radiolbl">AM</span><input type="radio" name="ampm" value="AM"><span class="radiolbl">or PM</span><input type="radio" name="ampm" value="PM" id="pm" checked>
    <br><input type="submit">
  </form>
  <ul id="resp"></ul>
</div>  
<script>
  var debug = false;
  var handlePM = function(time, pm) {
    if( !time ) return null;
    var comps = time.split(":");
    return pm ? (parseInt(comps[0])+12)+":"+comps[1] : time;
  };
  $("#form").submit(function(evt) {
    evt.preventDefault();
    var startTime = $("input[name=start]").val() || (new Date()).getHours() + (new Date()).getMinutes();
    $.post("/submit", { 
      period: $("input[name=period]").val(),
      start: startTime,
      end: handlePM($("input[name=end]").val(), $("#pm")[0].checked)
    }, function(data) {
      var resp = JSON.parse(data);
      $("#resp").html("<li>"+resp.join("</li><li>")+"</li>");
    });
  });
</script>
